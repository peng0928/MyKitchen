<navigation-bar title="企业登录" back="{{false}}" color="white" background="#1E88E5"></navigation-bar>

<view class="login-container">
  <view class="login-card">
    <view class="login-header">
      <image class="logo" src="/images/logo.png" mode="aspectFit"></image>
      <text class="welcome-text">欢迎回来</text>
      <text class="sub-text">请登录您的账号</text>
    </view>

    <view class="login-form">
      <block wx:if="{{canIUseNicknameComp && !hasUserInfo}}">
        <view class="avatar-section">
          <button class="avatar-wrapper" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
            <image class="avatar" src="{{userInfo.avatarUrl}}"></image>
            <view class="avatar-edit-icon">✎</view>
          </button>
          <text class="avatar-hint">点击上传头像</text>
        </view>

        <view class="form-group">
          <text class="form-label">用户名</text>
          <input 
            type="nickname" 
            class="form-input" 
            placeholder="请输入您的用户名" 
            bind:change="onInputChange"
            placeholder-class="placeholder"
          />
        </view>

        <view class="form-group">
          <text class="form-label">密码</text>
          <input 
            password 
            class="form-input" 
            placeholder="请输入密码" 
            placeholder-class="placeholder"
          />
        </view>

        <view class="remember-me">
          <checkbox-group>
            <label class="checkbox-label">
              <checkbox value="remember" color="#1E88E5"/>记住我
            </label>
          </checkbox-group>
          <text class="forgot-password" bindtap="navigateToForgotPassword">忘记密码?</text>
        </view>

        <button class="login-button" bindtap="handleLogin">登 录</button>
      </block>

      <block wx:elif="{{!hasUserInfo}}">
        <button class="auth-button" wx:if="{{canIUseGetUserProfile}}" bindtap="getUserProfile"> 
          授权获取用户信息 
        </button>
        <view wx:else class="version-warning"> 
          请使用2.10.4及以上版本基础库 
        </view>
      </block>

      <block wx:else>
        <view class="user-info-display">
          <image bindtap="bindViewTap" class="user-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
          <text class="user-name">{{userInfo.nickName}}</text>
          <button class="logout-button" bindtap="handleLogout">切换账号</button>
        </view>
      </block>
    </view>

    <view class="footer-links">
      <text>还没有账号?</text>
      <text class="register-link" bindtap="navigateToRegister">立即注册</text>
    </view>
  </view>
</view>